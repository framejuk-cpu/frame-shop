<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å | Frame Shop</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Kanit',sans-serif;
}

html,body{
  width:100%;
  height:100%;
  margin:0;
}

body{
  background:linear-gradient(135deg,#7f1d1d,#020617);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
}

.register-card{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,0.08);
  border-radius:22px;
  padding:30px 24px;
  box-shadow:0 20px 45px rgba(0,0,0,0.6);
}

.register-card h1{
  text-align:center;
  margin-bottom:10px;
  color:#f87171;
}

.register-card p{
  text-align:center;
  font-size:14px;
  color:#fecaca;
  margin-bottom:25px;
}

.form-group{
  margin-bottom:14px;
}

.form-group label{
  font-size:14px;
  color:#fee2e2;
}

.form-group input{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:12px;
  border:none;
  outline:none;
  font-size:15px;
}

.btn{
  width:100%;
  padding:15px;
  margin-top:18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:0.25s;
}

.btn-register{
  background:linear-gradient(135deg,#ef4444,#dc2626);
  color:white;
}

.btn-register:hover{
  transform:scale(1.04);
  box-shadow:0 10px 25px rgba(0,0,0,0.4);
}

.back{
  margin-top:18px;
  text-align:center;
  font-size:14px;
}

.back a{
  color:#fca5a5;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="register-card">
  <h1>üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
  <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Frame Shop</p>

  <div class="form-group">
    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
    <input id="username" type="text" placeholder="‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
  </div>

  <div class="form-group">
    <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
    <input id="email" type="email" placeholder="example@email.com">
  </div>

  <div class="form-group">
    <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
    <input id="password" type="password" placeholder="‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£">
  </div>

  <div class="form-group">
    <label>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
    <input id="confirm" type="password" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á">
  </div>
  
  <button class="btn btn-register" onclick="register()">
  ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
</button>

  <div class="back">
    ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß? <a href="login.html">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a><br>
    <a href="index.html">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å</a>
  </div>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbyDAmrWjGFjx64BpCxr-khxKbkALspQQ_dxbL3HYKaF2-uZxc-nCO_OBSeViXL4osBPlw/exec";

function register(){
  const username = document.getElementById("username").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  const confirm = document.getElementById("confirm").value;

  if(!username || !email || !password || !confirm){
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }

  if(password.length < 6){
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 6 ‡∏ï‡∏±‡∏ß");
    return;
  }

  if(password !== confirm){
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
    return;
  }

  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({
      username:username,
      email:email,
      password:password
    })
  })
  .then(res=>res.json())
  .then(data=>{
    alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ");
    document.getElementById("username").value="";
    document.getElementById("email").value="";
    document.getElementById("password").value="";
    document.getElementById("confirm").value="";
  })
  .catch(()=>{
    alert("‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà");
  });
}
</script>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbz3IHth_mdUHl3doaubPDlL4iFZ8L8ZYUm5iPW4ByXHAwRFdCgMRku8fI_R7ykERUi8ag/exec";

function register() {
  const username = document.getElementById("username").value.trim();
  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();
  const confirm = document.getElementById("confirm").value.trim();

  if (!username || !email || !password || !confirm) {
    alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    return;
  }

  if (password !== confirm) {
    alert("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
    return;
  }

  fetch(API_URL, {
    method: "POST",
    body: JSON.stringify({
      username: username,
      email: email,
      password: password
    })
  })
  .then(res => res.json())
  .then(data => {
    if (data.status === "success") {

      // ‚úÖ ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÄ‡∏™‡∏£‡πá‡∏à ‚Üí ‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
      autoLogin(email, password);

    } else {
      alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
    }
  })
  .catch(() => {
    alert("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
  });
}

function autoLogin(email, password) {
  fetch(`${API_URL}?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`)
    .then(res => res.json())
    .then(data => {
      if (data.status === "success") {
        alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÅ‡∏•‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à üéâ");

        // üîÅ ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£
        window.location.href = "login.html";
        // ‡∏´‡∏£‡∏∑‡∏≠ dashboard.html
      } else {
        alert("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô");
      }
    });
}

</script>

</body>

  </html>
