<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å | Frame Shop</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Kanit',sans-serif;
}
html,body{
  width:100%;
  height:100%;
  margin:0;
}
body{
  background:linear-gradient(135deg,#7f1d1d,#020617);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
}
.register-card{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,0.08);
  border-radius:22px;
  padding:30px 24px;
  box-shadow:0 20px 45px rgba(0,0,0,0.6);
}
.register-card h1{
  text-align:center;
  color:#f87171;
}
.register-card p{
  text-align:center;
  font-size:14px;
  color:#fecaca;
  margin-bottom:25px;
}
.form-group{
  margin-bottom:14px;
}
.form-group label{
  font-size:14px;
}
.form-group input{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:12px;
  border:none;
  font-size:15px;
}
.btn{
  width:100%;
  padding:15px;
  margin-top:18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.btn-register{
  background:linear-gradient(135deg,#ef4444,#dc2626);
  color:white;
}
.back{
  margin-top:18px;
  text-align:center;
  font-size:14px;
}
.back a{
  color:#fca5a5;
  text-decoration:none;
}

/* ===== Loading ===== */
#loading{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.6);
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.spinner{
  width:50px;
  height:50px;
  border:5px solid #fecaca;
  border-top:5px solid #ef4444;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
#loading p{
  margin-top:12px;
}
@keyframes spin{
  0%{transform:rotate(0deg)}
  100%{transform:rotate(360deg)}
}
</style>
</head>

<body>

<div class="register-card">
  <h1>üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
  <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Frame Shop</p>

  <div class="form-group">
    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
    <input id="username" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
  </div>

  <div class="form-group">
    <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
    <input id="email" type="email" placeholder="example@email.com">
  </div>

  <div class="form-group">
    <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
    <input id="password" type="password"><!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å | Frame Shop</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Kanit',sans-serif;
}
html,body{
  width:100%;
  height:100%;
  margin:0;
}
body{
  background:linear-gradient(135deg,#7f1d1d,#020617);
  display:flex;
  align-items:center;
  justify-content:center;
  color:#fff;
}
.register-card{
  width:100%;
  max-width:420px;
  background:rgba(255,255,255,0.08);
  border-radius:22px;
  padding:30px 24px;
  box-shadow:0 20px 45px rgba(0,0,0,0.6);
}
.register-card h1{
  text-align:center;
  color:#f87171;
}
.register-card p{
  text-align:center;
  font-size:14px;
  color:#fecaca;
  margin-bottom:25px;
}
.form-group{
  margin-bottom:14px;
}
.form-group label{
  font-size:14px;
}
.form-group input{
  width:100%;
  padding:14px;
  margin-top:6px;
  border-radius:12px;
  border:none;
  font-size:15px;
}
.btn{
  width:100%;
  padding:15px;
  margin-top:18px;
  border:none;
  border-radius:14px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
}
.btn-register{
  background:linear-gradient(135deg,#ef4444,#dc2626);
  color:white;
}
.back{
  margin-top:18px;
  text-align:center;
  font-size:14px;
}
.back a{
  color:#fca5a5;
  text-decoration:none;
}

/* ===== Loading ===== */
#loading{
  position:fixed;
  top:0;left:0;
  width:100%;height:100%;
  background:rgba(0,0,0,0.7);
  display:none;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  z-index:9999;
}
.spinner{
  width:50px;
  height:50px;
  border:5px solid #fecaca;
  border-top:5px solid #ef4444;
  border-radius:50%;
  animation:spin 1s linear infinite;
}
#loading p{
  margin-top:12px;
  color:#fff;
}
@keyframes spin{
  0%{transform:rotate(0deg)}
  100%{transform:rotate(360deg)}
}
</style>
</head>

<body>

<div class="register-card">
  <h1>üìù ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h1>
  <p>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô Frame Shop</p>

  <div class="form-group">
    <label>‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ</label>
    <input id="username" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ">
  </div>

  <div class="form-group">
    <label>‡∏≠‡∏µ‡πÄ‡∏°‡∏•</label>
    <input id="email" type="email" placeholder="example@email.com">
  </div>

  <div class="form-group">
    <label>‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
    <input id="password" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
  </div>

  <div class="form-group">
    <label>‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô</label>
    <input id="confirm" placeholder="‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô">
  </div>

  <button class="btn btn-register" onclick="register()">‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</button>

  <div class="back">
    ‡∏°‡∏µ‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡πÅ‡∏•‡πâ‡∏ß? <a href="login.html">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</a><br>
    
  </div>
</div>

<!-- Loading -->
<div id="loading">
  <div class="spinner"></div>
  <p id="loadingText">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£...</p>
</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbz3IHth_mdUHl3doaubPDlL4iFZ8L8ZYUm5iPW4ByXHAwRFdCgMRku8fI_R7ykERUi8ag/exec";

function showLoading(text){
  document.getElementById("loadingText").innerText = text;
  document.getElementById("loading").style.display="flex";
}
function hideLoading(){
  document.getElementById("loading").style.display="none";
}

function register(){
  const username = document.getElementById("username").value.trim();
  const email    = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value;
  const confirm  = document.getElementById("confirm").value;

  if(!username || !email || !password || !confirm){
    showLoading("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
    setTimeout(hideLoading,1500);
    return;
  }

  if(password !== confirm){
    showLoading("‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô");
    setTimeout(hideLoading,1500);
    return;
  }

  showLoading("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å...");

  fetch(API_URL,{
    method:"POST",
    body:JSON.stringify({username,email,password})
  })
  .then(res=>res.json())
  .then(data=>{
    if(data.status==="success"){
      showLoading("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö...");
      autoLogin(email,password);
    }else{
      showLoading("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡πÑ‡∏°‡πà‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à");
      setTimeout(hideLoading,1500);
    }
  })
  .catch(()=>{
    showLoading("‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ");
    setTimeout(hideLoading,1500);
  });
}

function autoLogin(email,password){
  fetch(`${API_URL}?email=${encodeURIComponent(email)}&password=${encodeURIComponent(password)}`)
  .then(res=>res.json())
  .then(data=>{
    if(data.status==="success"){
      setTimeout(()=>{
        window.location.href="login.html";
      },1500);
    }else{
      showLoading("‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏ï‡πà‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô");
      setTimeout(hideLoading,1500);
    }
  });
}
</script>

</body>
</html>
